---
- name: DB_Deploy
  hosts: 172.16.14.141

  tasks:
    - name: call python
      ignore_errors: True
      no_log: True
      register: r_python
      shell:
       cmd: |
         . ~/.bash_profile;
         /tmp/test.sh;
    - name: python Standard Out
        shell: 'echo {{ r_python.stdout_lines }}'
      when: r_python.stdout_lines != ""
    - name: python Standard Error
        shell: 'echo {{ r_python.stderr_lines }}'
      when: r_python.stderr_lines != ""
    - fail:
        msg: "error shell, Please check the debug messages."
      when: r_python.stderr_lines != ""